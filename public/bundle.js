(()=>{"use strict";var e={401:(e,t,o)=>{o.r(t),o.d(t,{checkAuthentication:()=>m,check_password:()=>s,deleteCookie:()=>a,displayUser:()=>h,getCookie:()=>r,getQueryParam:()=>c,getUser:()=>u,redirectToDashboard:()=>w,redirectToEmailVerification:()=>f,redirectToLogin:()=>p,redirectToOnboarding:()=>g,redirectToPasswordPending:()=>v,redirectToVerificationPending:()=>y,redirectVerifyEmail:()=>_,sendVerificationMail:()=>l,setCookie:()=>i,verifyToken:()=>d});const n="wized_token";function r(e){const t=("; "+document.cookie).split("; "+e+"=");return 2===t.length?t.pop().split(";").shift():null}function i(e){document.cookie="wized_token="+e+";path=/"}function a(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;"}function s(e,t){const o=document.getElementById("password_constraint_characters"),n=document.getElementById("password_constraint_upperlower"),r=document.getElementById("password_constraint_number"),i=document.getElementById("password_constraint_special"),a=document.getElementById("password_constraint_correctness");var s=!1,c=!1,l=!1,d=!1,u=!1;return e.length>=5&&e.length<=20?(o.classList.remove("text-color-red"),s=!0):o.classList.contains("text-color-red")||o.classList.add("text-color-red"),/[a-z]/.test(e)&&/[A-Z]/.test(e)?(n.classList.remove("text-color-red"),c=!0):n.classList.contains("text-color-red")||n.classList.add("text-color-red"),/\d/.test(e)?(r.classList.remove("text-color-red"),l=!0):r.classList.contains("text-color-red")||r.classList.add("text-color-red"),/[!@#$%^&*(),.?":{}|<>]/.test(e)?(i.classList.remove("text-color-red"),d=!0):i.classList.contains("text-color-red")||i.classList.add("text-color-red"),e===t&""!==e?(a.classList.remove("text-color-red"),u=!0):a.classList.contains("text-color-red")||a.classList.add("text-color-red"),!!(s&&c&&l&&d&&u)}function c(e){return new URLSearchParams(window.location.search).get(e)}async function l(e,t,o){const n=new FormData;n.append("email",e),n.append("sendgrid_template",t),n.append("redirect_uri",o);try{const e=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:xhKh0vlR/auth/magic-link",{method:"POST",headers:{},body:n}),t=await e.json();return e.ok,t}catch(e){console.error("Error while sending verification mail:",e)}}async function d(e){try{const t=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:xhKh0vlR/auth/me",{method:"GET",headers:{Authorization:"Bearer "+e}}),o=await t.json();return t.ok?!!o.id:(console.error("Token verification failed:",o.message||"Unknown error"),!1)}catch(e){return console.error("Error verifying token:",e),!1}}async function u(e){try{const t=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:xhKh0vlR/auth/me",{method:"GET",headers:{Authorization:"Bearer "+e}}),o=await t.json();return t.ok?o.id?o:t:(console.error("Token verification failed:",o.message||"Unknown error"),!1)}catch(e){return console.error("Error verifying token:",e),!1}}async function m(){const e=r(n);e?await d(e)||(a(n),p()):p()}async function h(){const e=document.querySelectorAll('[w-el="firstname"]'),t=document.querySelectorAll('[w-el="lastname"]'),o=document.querySelectorAll('[w-el="email"]'),n=r("wized_token"),i=await u(n);e.forEach((e=>{e.textContent=i.firstname})),t.forEach((e=>{e.textContent=i.lastname})),o.forEach((e=>{e.textContent=i.email}))}function p(){window.location.href="https://worldify.webflow.io/account/login"}function f(){window.location.href="https://worldify.webflow.io/account/send-email-verification"}function w(){window.location.href="https://worldify.webflow.io/app/dashboard"}function g(){window.location.href="https://worldify.webflow.io/account/onboarding"}function y(){window.location.href="https://worldify.webflow.io/account/email-verification-pending"}function v(){window.location.href="https://worldify.webflow.io/account/password-reset-pending"}function _(){window.location.href="https://worldify.webflow.io/account/verify-email"}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=o(401);const{getCookie:t}=o(401);function n(e,t=!1,o=!1){let n="",r="",i="Open Task";return t?n="is-pinned":o&&(r="is-completed",i="Completed",n="hide"),`\n<div w-el="module_item" id=${e.id} class="card is-no-margin is-hover">\n    <div class="task-item">\n        <div class="task_progress-color-wrapper">\n            <div class="task_progress-color background-color-light-blue ${r}"></div>\n        </div>\n        <div class="task_meta-wrapper">\n            <div w-el="module_pinButton" class="pin-button">\n                <div class="pin-button_icon w-embed ${n}">\n                    <svg width="74" height="74" viewBox="0 0 74 74" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M19.6866 53.3504L21.1008 51.9362L19.6866 50.522L6.38494 37.2203C5.57291 36.4083 5.29235 35.6333 5.28076 35.0128C5.2693 34.4017 5.513 33.6921 6.22866 32.9764C10.6477 28.5574 19.2996 27.1345 28.1763 31.2918L29.3518 31.8423L30.3334 30.9928L42.402 20.5469L43.3574 19.72L43.021 18.5021C41.4916 12.9662 40.9287 8.01808 41.2424 5.48661C41.394 4.34834 41.7859 3.66432 42.1421 3.30805C42.5181 2.93204 42.9181 2.8003 43.2936 2.81512C43.6811 2.83041 44.2172 3.01213 44.7901 3.58504L71.0001 29.795C71.5566 30.3516 71.7439 30.8886 71.7609 31.2881C71.7773 31.675 71.6438 32.0759 71.2769 32.4428C70.9434 32.7763 70.2533 33.161 69.0741 33.3181C66.5427 33.6319 61.5944 33.0689 56.0583 31.5394L54.8404 31.203L54.0135 32.1584L43.5676 44.2271L42.7182 45.2087L43.2687 46.3842C47.4259 55.2608 46.003 63.9128 41.584 68.3318C40.8683 69.0475 40.1587 69.2911 39.5476 69.2798C38.9271 69.2681 38.1522 68.9876 37.3402 68.1756L24.0385 54.8739L22.6243 53.4597L21.2101 54.8739L9.75649 66.3275C8.0822 68.0017 6.19501 69.1886 4.67968 69.8839C5.37073 68.3679 6.55726 66.4798 8.23303 64.804L19.6866 53.3504Z" fill="currentColor" stroke="black" stroke-width="4"></path>\n                    </svg>\n                </div>\n            </div>\n            <a w-el="module_link" href="${e.module_link}" class="open-task-button w-inline-block">\n                <div class="task_open-text">${i}</div>\n                <div class="icon-embed-xsmall w-embed">\n                    <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M14.5931 0.983396C14.5753 0.4314 14.1133 -0.00160407 13.5613 0.0162529L4.56602 0.307258C4.01402 0.325115 3.58102 0.787073 3.59887 1.33907C3.61673 1.89106 4.07869 2.32407 4.63068 2.30621L12.6265 2.04754L12.8852 10.0434C12.903 10.5954 13.365 11.0284 13.917 11.0105C14.469 10.9926 14.902 10.5307 14.8841 9.97869L14.5931 0.983396ZM2.16725 14.6684L14.3232 1.6996L12.864 0.331856L0.708052 13.3007L2.16725 14.6684Z" fill="currentColor"></path>\n                    </svg>\n                </div>\n            </a>\n        </div>\n        <a w-el="module_link" href="${e.module_link}" class="task_header-wrapper w-inline-block">\n            <h3 w-el="module_title" class="heading-style-h6">${e.module_title}</h3>\n            <div class="spacer-small"></div>\n            <p class="text-size-small">${e.module_description}</p>\n        </a>\n    </div>\n</div>\n    `}const r={"/account/login":function(){window.Webflow&&window.Webflow.push((async()=>{try{let t;const o=document.getElementById("wf-form-Login-Form");o&&o.parentElement&&(o.parentElement.classList.remove("w-form"),t=o.parentElement.querySelector('[w-el="error"]'),t.style.display="none",o.onsubmit=async n=>{try{n.preventDefault();const r=document.querySelector('[w-el="submitButton"]');r.value=r.getAttribute("data-wait");const i=new FormData(o),a=new FormData;for(let[e,t]of i.entries())"login_email"===e?a.append("email",t):"login_password"===e?a.append("password",t):a.append(e,t);Object.fromEntries(a.entries());const s=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:xhKh0vlR/auth/login",{method:"POST",body:a,headers:{}}),c=await s.json();s.ok?((0,e.setCookie)(c.authToken),(0,e.redirectToDashboard)()):("No Account for this Email."===c.message||"Invalid Credentials."===c.message?t.firstChild.textContent=c.message:t.firstChild.textContent="Something went wrong... Please try again in a few minutes. If the error persists please contact us: hello@getworldify.com.",t.style.display="block"),r.value="Login"}catch(e){console.error("Error during login:",e)}})}catch(e){console.error("error",e)}}))},"/account/signup":function(){let t=!1;const o=document.getElementById("wf-form-Signup-Form");let n=o.parentElement.querySelector('[w-el="error"]');n.style.display="none";const r=document.querySelector('[w-el="signup_password"]'),i=document.querySelector('[w-el="signup_password2"]');r.addEventListener("change",(function(){t=(0,e.check_password)(r.value,i.value),n.style.display="none"})),i.addEventListener("change",(function(){t=(0,e.check_password)(r.value,i.value),n.style.display="none"})),window.Webflow&&window.Webflow.push((async()=>{try{console.log(o),o&&o.parentElement&&(o.parentElement.classList.remove("w-form"),o.onsubmit=async r=>{try{r.preventDefault();const i=document.querySelector('[w-el="submitButton"]');if(i.value=i.getAttribute("data-wait"),t){const t=new FormData(o),r=new FormData;for(let[e,o]of t.entries())"signup_email"===e?r.append("email",o):"signup_password"===e&&r.append("password",o);const a=Object.fromEntries(r.entries());console.log(a);const s=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:xhKh0vlR/auth/signup_form",{method:"POST",body:r,headers:{}}),c=await s.json();console.log(c),s.ok?((0,e.setCookie)(c.authToken),(0,e.redirectToOnboarding)()):n.style.display="block",i.value="Signup"}else n.firstChild.textContent="Please check the password requirements.",n.style.display="block",i.value="Signup"}catch(e){console.error("Error during login:",e)}})}catch(e){console.error("error",e)}}))},"/account/onboarding":function(){const t=document.getElementById("wf-form-Onboarding-Form");window.Webflow&&window.Webflow.push((async()=>{try{if(console.log(t),t&&t.parentElement){t.parentElement.classList.remove("w-form");let o=t.parentElement.querySelector('[w-el="error"]');o.style.display="none",t.onsubmit=async n=>{try{n.preventDefault();const r=document.querySelector('[w-el="submitButton"]');r.value=r.getAttribute("data-wait");const i=new FormData(t),a=new FormData,s={address_line_1:"",address_line_2:"",city:"",zip:"",state:"",country:""},c={year:"",month:"",day:""};for(let[e,t]of i.entries())"onboarding_firstname"===e?a.append("firstname",t):"onboarding_middlename"===e?a.append("middle_name",t):"onboarding_lastname"===e?a.append("lastname",t):"onboarding_birth_day"===e?t.length<2?c.day="0"+t:c.day=t:"onboarding_birth_month"===e?t.length<2?c.month="0"+t:c.month=t:"onboarding_birth_year"===e?c.year=t:"onboarding_citizenship1"===e?a.append("citizenship",t):"onboarding_citizenship2"===e?a.append("citizenship_2",t):"onboarding_addressLine1"===e?s.address_line_1=t:"onboarding_addressLine2"===e?s.address_line_2=t:"onboarding_city"===e?s.city=t:"onboarding_zip"===e?s.zip=t:"onboarding_state"===e?s.state=t:"onboarding_country"===e?s.country=t:"onboarding_residenceStatus"===e?a.append("german_residence_status",t):"onboarding_gender_passport"===e?a.append("gender_passport",t):"onboarding_gender_chosen"===e?a.append("gender_chosen",t):"onboarding_marriageStatus"===e?a.append("marriage_status",t):"onboarding_parentalStatus"===e&&a.append("parental_status",t);const l=`${c.year}-${c.month}-${c.day}`,d=JSON.stringify(s);a.append("birth_date",l),a.append("address",d);const u=Object.fromEntries(a.entries());console.log(u);const m="Bearer "+(0,e.getCookie)("wized_token"),h=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:xhKh0vlR/auth/onboarding",{method:"POST",body:a,headers:{Authorization:m}}),p=await h.json();console.log(p),console.log(h),h.ok?p.is_verified||(0,e.redirectVerifyEmail)():("No Account for this Email."===p.message||"Invalid Credentials."===p.message?o.firstChild.textContent=p.message:o.firstChild.textContent="Something went wrong... Please try again in a few minutes. If the error persists please contact us: hello@getworldify.com. Please add the following error message: "+h.message,o.style.display="block"),r.value="Submit"}catch(e){console.error("Error during onboarding:",e)}}}}catch(e){console.error("error",e)}}))},"/account/verify-email":async function(){const t=document.querySelector('[w-el="verifyMail_component"]'),o=document.querySelector('[w-el="alreadyVerified_component"]'),n=document.querySelector('[w-el="submitButton"]'),r=document.querySelector('[w-el="error"]'),i=document.querySelectorAll('[w-el="firstname"]'),a=(0,e.getCookie)("wized_token"),s=await(0,e.getUser)(a);if(i.forEach((e=>{e.textContent=s.firstname})),console.log(s),s.id)if(s.is_verified)o.classList.remove("hide");else try{t.classList.remove("hide"),n.addEventListener("click",(async function(){n.firstChild.textContent="Please wait ...";var t=await(0,e.sendVerificationMail)(s.email,"email_verification","https://worldify.webflow.io/account/email-verification");n.firstChild.textContent="Send Verification Email",t.message.success?(0,e.redirectToVerificationPending)():(r.classList.remove("hide"),r.firstChild.textContent=t.message)}))}catch(e){console.error("Error during email verification:",e)}else(0,e.redirectToLogin)();document.addEventListener("DOMContentLoaded",(async function(){}))},"/account/email-verification":async function(){const t=(0,e.getQueryParam)("token"),o=document.querySelector('[w-el="verification_successMessage"]'),n=document.querySelector('[w-el="firstname"]'),r=document.querySelector('[w-el="verification_failedMessage"]');document.querySelector('[w-el="submitButton"]'),console.log(t);const i=new FormData;i.append("magic_token",t);try{const t=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:xhKh0vlR/auth/magic-login",{method:"POST",headers:{},body:i}),a=await t.json();if(console.log(a),console.log(t),t.ok){const t=a;(0,e.setCookie)(t);const r=await(0,e.getUser)(t);n.textContent=r.firstname,o.classList.remove("hide"),console.log(t)}else r.classList.remove("hide"),console.error("Magic Login failed:",t.statusText)}catch(e){console.error("Error with magic login:",e)}}},i={"/app/dashboard":async function(){const e=document.querySelector('[w-el="module_list"]');if(e.hasChildNodes)for(;e.firstChild;)e.removeChild(e.firstChild);let o,r=[],i=[],a=[],s=await async function(){const e="Bearer "+t("wized_token");try{const t=await fetch("https://xfa3-mghj-yd9n.n7c.xano.io/api:ghdeJJTr/modules",{method:"GET",headers:{Authorization:e}}),o=await t.json();if(t.ok)return o}catch(e){}}();Array.isArray(s)?o=s:"object"==typeof s&&null!==s?o=Object.values(s):console.error("Data is neither an array nor an object:",s),console.log(o),o.forEach((e=>{let t;e.is_completed?(t=n(e._modules[0],!1,!0),a.push(t)):e.is_pinned?(t=n(e._modules[0],!0),r.push(t)):0===e[0]||(t=n(e._modules[0]),i.push(t))})),r.forEach((t=>{e.innerHTML+=t})),i.forEach((t=>{e.innerHTML+=t})),a.forEach((t=>{e.innerHTML+=t}))}};console.log("https://xfa3-mghj-yd9n.n7c.xano.io/api:xhKh0vlR"),document.addEventListener("DOMContentLoaded",(function(){const t=window.location.pathname;t.startsWith("/app/")?((0,e.checkAuthentication)(),(0,e.displayUser)(),i[t]&&i[t]()):t.startsWith("/account/")&&r[t]&&r[t]()}))})()})();
//# sourceMappingURL=bundle.js.map